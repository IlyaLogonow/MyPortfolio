console.clear();const{gsap,imagesLoaded}=window,buttons={prev:document.querySelector(".btn--left"),next:document.querySelector(".btn--right")},cardsContainerEl=document.querySelector(".cards__wrapper"),appBgContainerEl=document.querySelector(".app__bg"),cardInfosContainerEl=document.querySelector(".info__wrapper");function swapCards(e){const t=cardsContainerEl.querySelector(".current--card"),r=cardsContainerEl.querySelector(".previous--card"),n=cardsContainerEl.querySelector(".next--card"),a=appBgContainerEl.querySelector(".current--image"),s=appBgContainerEl.querySelector(".previous--image"),o=appBgContainerEl.querySelector(".next--image");changeInfo(e),t.classList.remove("current--card"),r.classList.remove("previous--card"),n.classList.remove("next--card"),a.classList.remove("current--image"),s.classList.remove("previous--image"),o.classList.remove("next--image"),t.style.zIndex="50",a.style.zIndex="-2","right"===e?(r.style.zIndex="20",n.style.zIndex="30",o.style.zIndex="-1",t.classList.add("previous--card"),r.classList.add("next--card"),n.classList.add("current--card"),a.classList.add("previous--image"),s.classList.add("next--image"),o.classList.add("current--image")):"left"===e&&(r.style.zIndex="30",n.style.zIndex="20",s.style.zIndex="-1",t.classList.add("next--card"),r.classList.add("current--card"),n.classList.add("previous--card"),a.classList.add("next--image"),s.classList.add("current--image"),o.classList.add("previous--image")),removeCardEvents(t)}function changeInfo(e){let t=cardInfosContainerEl.querySelector(".current--info"),r=cardInfosContainerEl.querySelector(".previous--info"),n=cardInfosContainerEl.querySelector(".next--info");gsap.timeline().to([buttons.prev,buttons.next],{duration:.2,opacity:.5,pointerEvents:"none"}).to(t.querySelectorAll(".text"),{duration:.4,stagger:.1,translateY:"-120px",opacity:0},"-=").call(()=>{t.classList.remove("current--info"),r.classList.remove("previous--info"),n.classList.remove("next--info"),"right"===e?(t.classList.add("previous--info"),n.classList.add("current--info"),r.classList.add("next--info")):"left"===e&&(t.classList.add("next--info"),n.classList.add("previous--info"),r.classList.add("current--info"))}).call(()=>initCardEvents()).fromTo(("right"===e?n:r).querySelectorAll(".text"),{opacity:0,translateY:"40px"},{duration:.4,stagger:.1,translateY:"0px",opacity:1}).to([buttons.prev,buttons.next],{duration:.2,opacity:1,pointerEvents:"all"})}function updateCard(e){const t=e.currentTarget;var r=t.getBoundingClientRect();const n=r.left+r.width/2;r.top,r.height;r=Math.atan2(e.pageX-n,0)*(35/Math.PI);gsap.set(t,{"--current-card-rotation-offset":`${r}deg`});e=cardInfosContainerEl.querySelector(".current--info");gsap.set(e,{rotateY:`${r}deg`})}function resetCardTransforms(e){var t=e.currentTarget,e=cardInfosContainerEl.querySelector(".current--info");gsap.set(t,{"--current-card-rotation-offset":0}),gsap.set(e,{rotateY:0})}function initCardEvents(){const e=cardsContainerEl.querySelector(".current--card");e.addEventListener("pointermove",updateCard),e.addEventListener("pointerout",e=>{resetCardTransforms(e)})}function removeCardEvents(e){e.removeEventListener("pointermove",updateCard)}function init(){let e=gsap.timeline();e.to(cardsContainerEl.children,{delay:.15,duration:.5,stagger:{ease:"power4.inOut",from:"right",amount:.1},"--card-translateY-offset":"0%"}).to(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{delay:.5,duration:.4,stagger:.1,opacity:1,translateY:0}).to([buttons.prev,buttons.next],{duration:.4,opacity:1,pointerEvents:"all"},"-=0.4")}buttons.next.addEventListener("click",()=>swapCards("right")),buttons.prev.addEventListener("click",()=>swapCards("left")),initCardEvents();const waitForImages=()=>{const e=[...document.querySelectorAll("img")],t=e.length;let r=0;const n=document.querySelector(".loader span");gsap.set(cardsContainerEl.children,{"--card-translateY-offset":"100vh"}),gsap.set(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{translateY:"40px",opacity:0}),gsap.set([buttons.prev,buttons.next],{pointerEvents:"none",opacity:"0"}),e.forEach(e=>{imagesLoaded(e,e=>{e.isComplete&&(r++,e=r/t,gsap.to(n,{duration:1,scaleX:e,backgroundColor:`hsl(${120*e}, 100%, 50%`}),t==r&&gsap.timeline().to(".loading__wrapper",{duration:.8,opacity:0,pointerEvents:"none"}).call(()=>init()))})})};waitForImages();